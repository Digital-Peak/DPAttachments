Element.prototype.matches||(Element.prototype.matches=Element.prototype.matchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector||Element.prototype.oMatchesSelector||Element.prototype.webkitMatchesSelector||function(e){for(var t=(this.document||this.ownerDocument).querySelectorAll(e),n=t.length;0<=--n&&t.item(n)!==this;);return-1<n}),function(r,a){"use strict";r.addEventListener("DOMContentLoaded",function(){r.querySelector(".com-dpattachments-layout-attachments").addEventListener("click",function(e){if(!e.target.matches(".dp-attachment__link"))return!0;e.preventDefault();function t(e){var t=new tingle.modal({footer:!1,stickyFooter:!1,closeMethods:["overlay","button","escape"],cssClass:["dp-attachment-modal"],closeLabel:a.JText._("TMPL_DPSTRAP_CLOSE","Close"),beforeOpen:function(){r.getSelection().removeAllRanges()}});t.setContent('<iframe class="dp-attachment-preview" src="'+e+'"></iframe>'),t.open()}if("undefined"!=typeof tingle&&tingle)return t(e.target.getAttribute("href")),!1;var n=r.createElement("script");n.type="text/javascript",n.src=a.getOptions("system.paths").root+"/media/com_dpattachments/js/tingle/tingle.min.js",n.addEventListener("load",function(){t(e.target.getAttribute("href"))}),r.head.appendChild(n);var o=r.createElement("link");return o.rel="stylesheet",o.href=a.getOptions("system.paths").root+"/media/com_dpattachments/css/tingle/tingle.min.css",r.head.appendChild(o),!1})})}(document,Joomla);
